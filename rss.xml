<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Sohot</title>
    <link>http://Leesohot.github.io/</link>
    
    <atom:link href="http://leesohot.github.io/rss.xml" rel="self" type="application/rss+xml"/>
    
    <description>This is Sohot&#39;s blog</description>
    <pubDate>Mon, 09 Nov 2020 08:09:10 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>DataSearch-API</title>
      <link>http://leesohot.github.io/posts/hello_url.html</link>
      <guid>http://leesohot.github.io/posts/hello_url.html</guid>
      <pubDate>Fri, 08 May 2020 12:03:00 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;DataSearch-服务接口指南&quot;&gt;&lt;a href=&quot;#DataSearch-服务接口指南&quot; class=&quot;headerlink&quot; title=&quot;DataSearch-服务接口指南&quot;&gt;&lt;/a&gt;DataSearch-服务接口指南&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;版本：1.0.0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;数据模糊搜索功能&lt;/p&gt;
&lt;h2 id=&quot;接口用法&quot;&gt;&lt;a href=&quot;#接口用法&quot; class=&quot;headerlink&quot; title=&quot;接口用法&quot;&gt;&lt;/a&gt;接口用法&lt;/h2&gt;&lt;p&gt;命名空间：&lt;strong&gt;GeoBOS.ds&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;search-words-options-list-callback&quot;&gt;&lt;a href=&quot;#search-words-options-list-callback&quot; class=&quot;headerlink&quot; title=&quot;search(words, options, list, callback)&quot;&gt;&lt;/a&gt;search(words, options, list, callback)&lt;/h3&gt;&lt;p&gt;模糊搜索功能。&lt;/p&gt;
&lt;h4 id=&quot;参数&quot;&gt;&lt;a href=&quot;#参数&quot; class=&quot;headerlink&quot; title=&quot;参数&quot;&gt;&lt;/a&gt;参数&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;words&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Object&lt;/code&gt; or &lt;code&gt;String&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;搜索的内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;options&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;搜索的控件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;list&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Array&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;搜索的范围&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;callback&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Function&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;回调函数&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&quot;words&quot;&gt;&lt;a href=&quot;#words&quot; class=&quot;headerlink&quot; title=&quot;words&quot;&gt;&lt;/a&gt;words&lt;/h4&gt;&lt;p&gt;words参数为&lt;code&gt;Object&lt;/code&gt;时可以使用逻辑查询运算符。这些运算符用于过滤数据并根据给定条件获得精确结果。下表包含逻辑查询运算符：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;名称&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;$and&lt;/td&gt;
&lt;td&gt;返回符合所有子句条件的所有文档&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$or&lt;/td&gt;
&lt;td&gt;返回符合任何子句条件的所有文档&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h5 id=&quot;格式样例&quot;&gt;&lt;a href=&quot;#格式样例&quot; class=&quot;headerlink&quot; title=&quot;格式样例&quot;&gt;&lt;/a&gt;格式样例&lt;/h5&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;span class=&quot;attr&quot;&gt;$and&lt;/span&gt;: [ &amp;#123; &amp;lt;expression_1&amp;gt; &amp;#125;, &amp;#123; &amp;lt;expression_2&amp;gt; &amp;#125; , ... , &amp;#123; &amp;lt;expression_N&amp;gt; &amp;#125; ] &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;操作者执行的逻辑AND或OR表达式和选择满足所有表达式中的条目的阵列上操作。$and/$or的操作者使用短路评价：即如果$and的第一表达式的值为false，或$or的第一表达式的值为true，GeoBOS.ds.search不会评价剩余的表达式&lt;/p&gt;
&lt;h5 id=&quot;and样例&quot;&gt;&lt;a href=&quot;#and样例&quot; class=&quot;headerlink&quot; title=&quot;$and样例&quot;&gt;&lt;/a&gt;$and样例&lt;/h5&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; words = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $and: [&amp;#123; &lt;span class=&quot;attr&quot;&gt;author&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;abc&#39;&lt;/span&gt; &amp;#125;, &amp;#123; &lt;span class=&quot;attr&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;xyz&#39;&lt;/span&gt; &amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;or样例&quot;&gt;&lt;a href=&quot;#or样例&quot; class=&quot;headerlink&quot; title=&quot;$or样例&quot;&gt;&lt;/a&gt;$or样例&lt;/h5&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; words = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $or: [&amp;#123; &lt;span class=&quot;attr&quot;&gt;author&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;abc&#39;&lt;/span&gt; &amp;#125;, &amp;#123; &lt;span class=&quot;attr&quot;&gt;author&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;def&#39;&lt;/span&gt; &amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h5 id=&quot;同时还可以与扩展搜索进行匹配&quot;&gt;&lt;a href=&quot;#同时还可以与扩展搜索进行匹配&quot; class=&quot;headerlink&quot; title=&quot;同时还可以与扩展搜索进行匹配&quot;&gt;&lt;/a&gt;同时还可以与扩展搜索进行匹配&lt;/h5&gt;&lt;p&gt;这种高级搜索形式使您可以微调结果。&lt;/p&gt;
&lt;p&gt;空格用作AND运算符，而单个竖线（|）字符用作OR运算符。要转义空格，请使用双引号，例如使用&lt;code&gt;=&amp;quot;scheme language&amp;quot;&lt;/code&gt;进行精确匹配。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;示例&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;示例描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;&lt;code&gt;jscript&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;模糊匹配&lt;/td&gt;
&lt;td&gt;模糊匹配jscript的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;=scheme&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;完全符合&lt;/td&gt;
&lt;td&gt;完全符合scheme的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;#39;python&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;包含匹配&lt;/td&gt;
&lt;td&gt;包含python的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;!ruby&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;完全相反的匹配&lt;/td&gt;
&lt;td&gt;不包含ruby的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;^java&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;前缀匹配&lt;/td&gt;
&lt;td&gt;以java开头的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;!^earlang&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;前缀不匹配&lt;/td&gt;
&lt;td&gt;不以earlang开头的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;.js$&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;后缀匹配&lt;/td&gt;
&lt;td&gt;以.js结尾的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;!.go$&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;后缀匹配&lt;/td&gt;
&lt;td&gt;不以.go结尾的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; words = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $and: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123; &lt;span class=&quot;attr&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;old war&#39;&lt;/span&gt; &amp;#125;, &lt;span class=&quot;comment&quot;&gt;// Fuzzy &quot;old war&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123; &lt;span class=&quot;attr&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;&#39;blue&quot;&lt;/span&gt; &amp;#125;, &lt;span class=&quot;comment&quot;&gt;// Exact match for blue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      $or: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123; &lt;span class=&quot;attr&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;^lock&#39;&lt;/span&gt; &amp;#125;, &lt;span class=&quot;comment&quot;&gt;// Starts with &quot;lock&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123; &lt;span class=&quot;attr&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;!arts&#39;&lt;/span&gt; &amp;#125; &lt;span class=&quot;comment&quot;&gt;// Does not have &quot;arts&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&quot;options&quot;&gt;&lt;a href=&quot;#options&quot; class=&quot;headerlink&quot; title=&quot;options&quot;&gt;&lt;/a&gt;options&lt;/h4&gt;&lt;p&gt;options作为搜索控件有如下的属性&lt;/p&gt;
&lt;h5 id=&quot;基本选项&quot;&gt;&lt;a href=&quot;#基本选项&quot; class=&quot;headerlink&quot; title=&quot;基本选项&quot;&gt;&lt;/a&gt;基本选项&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;默认值&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;isCaseSensitive&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;指示是否区分大小写&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;includeScore&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;分数是否应包括在结果集中。得分0表示完全匹配，而得分1表示完全不匹配&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;includeMatches&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;是否将匹配项包含在结果集中。true时，结果集中的每个记录都将包含匹配字符的索引。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;minMatchCharLength&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;指示是否区分大小写&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isCaseSensitive&lt;/td&gt;
&lt;td&gt;&lt;code&gt;number&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;仅返回长度超过该值的匹配项。例如要忽略结果中的单个字符匹配，请将其设置为2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;shouldSort&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;td&gt;是否按分数对结果列表进行排序&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;findAllMatches&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;设置为true时，即使在字符串中已经找到了完全匹配项，匹配函数也将继续搜索模式的结尾。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;keys&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Array&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;[ ]&lt;/td&gt;
&lt;td&gt;将搜索的键列表。这支持嵌套路径，加权搜索，字符串和对象数组的搜索&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;keys属性中，可以为关键字分配权重，以在搜索结果中为其赋予更高（或更低）的值。该weight值必须大于0&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; options = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  includeScore: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  keys: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      name: &lt;span class=&quot;string&quot;&gt;&#39;title&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      weight: &lt;span class=&quot;number&quot;&gt;0.3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      name: &lt;span class=&quot;string&quot;&gt;&#39;author&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      weight: &lt;span class=&quot;number&quot;&gt;0.7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h5 id=&quot;模糊匹配选项&quot;&gt;&lt;a href=&quot;#模糊匹配选项&quot; class=&quot;headerlink&quot; title=&quot;模糊匹配选项&quot;&gt;&lt;/a&gt;模糊匹配选项&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;默认值&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;location&lt;/td&gt;
&lt;td&gt;&lt;code&gt;number&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;确定大约在文本中的位置是期望找到的模式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;threshold&lt;/td&gt;
&lt;td&gt;&lt;code&gt;number&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;0.6&lt;/td&gt;
&lt;td&gt;匹配算法在什么时候放弃。阈值0.0要求完全匹配(字母和位置均需匹配)，阈值1.0会匹配任何内容。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;distance&lt;/td&gt;
&lt;td&gt;&lt;code&gt;number&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;td&gt;确定匹配必须与模糊位置（由指定location）之间的接近程度。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ignoreLocation&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;当使用时true，搜索将忽略location和distance，因此匹配字符出现在字符串中的位置无关紧要&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h5 id=&quot;高级选项&quot;&gt;&lt;a href=&quot;#高级选项&quot; class=&quot;headerlink&quot; title=&quot;高级选项&quot;&gt;&lt;/a&gt;高级选项&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;默认值&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;useExtendedSearch&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;如果为true，则启用类Unix搜索命令的使用，详见扩展words参数中扩展搜索功能示例&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getFn&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Function&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;(obj: T, path: string&lt;/td&gt;
&lt;td&gt;string[]) =&amp;gt; string&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sortFn&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Function&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;(a, b) =&amp;gt; number&lt;/td&gt;
&lt;td&gt;用于对所有结果进行排序的函数。默认值将按相关性得分递增，索引递增排序&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ignoreFieldNorm&lt;/td&gt;
&lt;td&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;当时true，相关性得分的计算（用于排序）将忽略字段长度范数。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;设置ignoreFieldNorm为true唯一有意义的时间是，无论多少个术语都无关紧要，而只查询存在术语。&lt;/p&gt;
&lt;h4 id=&quot;list&quot;&gt;&lt;a href=&quot;#list&quot; class=&quot;headerlink&quot; title=&quot;list&quot;&gt;&lt;/a&gt;list&lt;/h4&gt;&lt;p&gt;搜索的范围可以是一个字符串数组或是一个对象数组&lt;/p&gt;
&lt;p&gt;可以通过使用点（.）或数组表示法提供路径来搜索嵌套值，该路径最终必须指向字符串，否则您将不会获得任何结果&lt;/p&gt;
&lt;h5 id=&quot;样例&quot;&gt;&lt;a href=&quot;#样例&quot; class=&quot;headerlink&quot; title=&quot;样例&quot;&gt;&lt;/a&gt;样例&lt;/h5&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; list = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    title: &lt;span class=&quot;string&quot;&gt;&quot;Old Man&#39;s War&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    author: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      name: &lt;span class=&quot;string&quot;&gt;&#39;John Scalzi&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      tags: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          value: &lt;span class=&quot;string&quot;&gt;&#39;American&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    title: &lt;span class=&quot;string&quot;&gt;&#39;The Lock Artist&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    author: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      name: &lt;span class=&quot;string&quot;&gt;&#39;Steve Hamilton&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      tags: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          value: &lt;span class=&quot;string&quot;&gt;&#39;English&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; options = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  includeScore: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  keys: [&lt;span class=&quot;string&quot;&gt;&#39;author.tags.value&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GeoBOS.ds.search(&lt;span class=&quot;string&quot;&gt;&#39;engsh&#39;&lt;/span&gt;, options, list, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;err,res&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!err) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(version)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&quot;callback&quot;&gt;&lt;a href=&quot;#callback&quot; class=&quot;headerlink&quot; title=&quot;callback&quot;&gt;&lt;/a&gt;callback&lt;/h4&gt;&lt;p&gt;回调函数&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;err&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Error&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;错误信息, 调用成功时为null&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;res&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;搜索的结果&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;回调函数会需要根据options的配置情况（是否包含模糊匹配得分等）返回指定属性的对象，如果只需返回结果对象，可用res.item&lt;/p&gt;
&lt;h5 id=&quot;样例-1&quot;&gt;&lt;a href=&quot;#样例-1&quot; class=&quot;headerlink&quot; title=&quot;样例&quot;&gt;&lt;/a&gt;样例&lt;/h5&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; options = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  includeScore: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  keys: [&lt;span class=&quot;string&quot;&gt;&#39;msg&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;from_name&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;plotName&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;description&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  threshold: &lt;span class=&quot;number&quot;&gt;0.7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 若只返回结果数组&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GeoBOS.ds.search(word, options, list, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;err, res&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!err)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; res.length; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;built_in&quot;&gt;JSON&lt;/span&gt;.stringify(res[i].item))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="DataSearch-服务接口指南"><a href="#DataSearch-服务接口指南" class="headerlink" title="DataSearch-服务接口指南"></a>DataSearch-服务接口指南</h1><p><strong>版本：1.0.0</strong></p><p>数据模糊搜索功能</p><h2 id="接口用法"><a href="#接口用法" class="headerlink" title="接口用法"></a>接口用法</h2><p>命名空间：<strong>GeoBOS.ds</strong></p><h3 id="search-words-options-list-callback"><a href="#search-words-options-list-callback" class="headerlink" title="search(words, options, list, callback)"></a>search(words, options, list, callback)</h3><p>模糊搜索功能。</p><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>words</td><td><code>Object</code> or <code>String</code></td><td>搜索的内容</td></tr><tr><td>options</td><td><code>Object</code></td><td>搜索的控件</td></tr><tr><td>list</td><td><code>Array</code></td><td>搜索的范围</td></tr><tr><td>callback</td><td><code>Function</code></td><td>回调函数</td></tr></tbody></table><h4 id="words"><a href="#words" class="headerlink" title="words"></a>words</h4><p>words参数为<code>Object</code>时可以使用逻辑查询运算符。这些运算符用于过滤数据并根据给定条件获得精确结果。下表包含逻辑查询运算符：</p><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>$and</td><td>返回符合所有子句条件的所有文档</td></tr><tr><td>$or</td><td>返回符合任何子句条件的所有文档</td></tr></tbody></table><h5 id="格式样例"><a href="#格式样例" class="headerlink" title="格式样例"></a>格式样例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">$and</span>: [ &#123; &lt;expression_1&gt; &#125;, &#123; &lt;expression_2&gt; &#125; , ... , &#123; &lt;expression_N&gt; &#125; ] &#125;</span><br></pre></td></tr></table></figure><p>操作者执行的逻辑AND或OR表达式和选择满足所有表达式中的条目的阵列上操作。$and/$or的操作者使用短路评价：即如果$and的第一表达式的值为false，或$or的第一表达式的值为true，GeoBOS.ds.search不会评价剩余的表达式</p><h5 id="and样例"><a href="#and样例" class="headerlink" title="$and样例"></a>$and样例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> words = &#123;</span><br><span class="line">  $and: [&#123; <span class="attr">author</span>: <span class="string">'abc'</span> &#125;, &#123; <span class="attr">title</span>: <span class="string">'xyz'</span> &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="or样例"><a href="#or样例" class="headerlink" title="$or样例"></a>$or样例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> words = &#123;</span><br><span class="line">  $or: [&#123; <span class="attr">author</span>: <span class="string">'abc'</span> &#125;, &#123; <span class="attr">author</span>: <span class="string">'def'</span> &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="同时还可以与扩展搜索进行匹配"><a href="#同时还可以与扩展搜索进行匹配" class="headerlink" title="同时还可以与扩展搜索进行匹配"></a>同时还可以与扩展搜索进行匹配</h5><p>这种高级搜索形式使您可以微调结果。</p><p>空格用作AND运算符，而单个竖线（|）字符用作OR运算符。要转义空格，请使用双引号，例如使用<code>=&quot;scheme language&quot;</code>进行精确匹配。</p><table><thead><tr><th>示例</th><th>类型</th><th>示例描述</th></tr></thead><tbody><tr><td><code>jscript</code></td><td>模糊匹配</td><td>模糊匹配jscript的项目</td></tr><tr><td><code>=scheme</code></td><td>完全符合</td><td>完全符合scheme的项目</td></tr><tr><td><code>&#39;python</code></td><td>包含匹配</td><td>包含python的项目</td></tr><tr><td><code>!ruby</code></td><td>完全相反的匹配</td><td>不包含ruby的项目</td></tr><tr><td><code>^java</code></td><td>前缀匹配</td><td>以java开头的项目</td></tr><tr><td><code>!^earlang</code></td><td>前缀不匹配</td><td>不以earlang开头的项目</td></tr><tr><td><code>.js$</code></td><td>后缀匹配</td><td>以.js结尾的项目</td></tr><tr><td><code>!.go$</code></td><td>后缀匹配</td><td>不以.go结尾的项目</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> words = &#123;</span><br><span class="line">  $and: [</span><br><span class="line">    &#123; <span class="attr">title</span>: <span class="string">'old war'</span> &#125;, <span class="comment">// Fuzzy "old war"</span></span><br><span class="line">    &#123; <span class="attr">color</span>: <span class="string">"'blue"</span> &#125;, <span class="comment">// Exact match for blue</span></span><br><span class="line">    &#123;</span><br><span class="line">      $or: [</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">'^lock'</span> &#125;, <span class="comment">// Starts with "lock"</span></span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">'!arts'</span> &#125; <span class="comment">// Does not have "arts"</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="options"><a href="#options" class="headerlink" title="options"></a>options</h4><p>options作为搜索控件有如下的属性</p><h5 id="基本选项"><a href="#基本选项" class="headerlink" title="基本选项"></a>基本选项</h5><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>isCaseSensitive</td><td><code>boolean</code></td><td>false</td><td>指示是否区分大小写</td></tr><tr><td>includeScore</td><td><code>boolean</code></td><td>false</td><td>分数是否应包括在结果集中。得分0表示完全匹配，而得分1表示完全不匹配</td></tr><tr><td>includeMatches</td><td><code>boolean</code></td><td>false</td><td>是否将匹配项包含在结果集中。true时，结果集中的每个记录都将包含匹配字符的索引。</td></tr><tr><td>minMatchCharLength</td><td><code>boolean</code></td><td>false</td><td>指示是否区分大小写</td></tr><tr><td>isCaseSensitive</td><td><code>number</code></td><td>1</td><td>仅返回长度超过该值的匹配项。例如要忽略结果中的单个字符匹配，请将其设置为2</td></tr><tr><td>shouldSort</td><td><code>boolean</code></td><td>true</td><td>是否按分数对结果列表进行排序</td></tr><tr><td>findAllMatches</td><td><code>boolean</code></td><td>false</td><td>设置为true时，即使在字符串中已经找到了完全匹配项，匹配函数也将继续搜索模式的结尾。</td></tr><tr><td>keys</td><td><code>Array</code></td><td>[ ]</td><td>将搜索的键列表。这支持嵌套路径，加权搜索，字符串和对象数组的搜索</td></tr></tbody></table><p>keys属性中，可以为关键字分配权重，以在搜索结果中为其赋予更高（或更低）的值。该weight值必须大于0</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  includeScore: <span class="literal">true</span>,</span><br><span class="line">  keys: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'title'</span>,</span><br><span class="line">      weight: <span class="number">0.3</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'author'</span>,</span><br><span class="line">      weight: <span class="number">0.7</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="模糊匹配选项"><a href="#模糊匹配选项" class="headerlink" title="模糊匹配选项"></a>模糊匹配选项</h5><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>location</td><td><code>number</code></td><td>0</td><td>确定大约在文本中的位置是期望找到的模式</td></tr><tr><td>threshold</td><td><code>number</code></td><td>0.6</td><td>匹配算法在什么时候放弃。阈值0.0要求完全匹配(字母和位置均需匹配)，阈值1.0会匹配任何内容。</td></tr><tr><td>distance</td><td><code>number</code></td><td>100</td><td>确定匹配必须与模糊位置（由指定location）之间的接近程度。</td></tr><tr><td>ignoreLocation</td><td><code>boolean</code></td><td>false</td><td>当使用时true，搜索将忽略location和distance，因此匹配字符出现在字符串中的位置无关紧要</td></tr></tbody></table><h5 id="高级选项"><a href="#高级选项" class="headerlink" title="高级选项"></a>高级选项</h5><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>useExtendedSearch</td><td><code>boolean</code></td><td>false</td><td>如果为true，则启用类Unix搜索命令的使用，详见扩展words参数中扩展搜索功能示例</td></tr><tr><td>getFn</td><td><code>Function</code></td><td>(obj: T, path: string</td><td>string[]) =&gt; string</td></tr><tr><td>sortFn</td><td><code>Function</code></td><td>(a, b) =&gt; number</td><td>用于对所有结果进行排序的函数。默认值将按相关性得分递增，索引递增排序</td></tr><tr><td>ignoreFieldNorm</td><td><code>boolean</code></td><td>false</td><td>当时true，相关性得分的计算（用于排序）将忽略字段长度范数。</td></tr></tbody></table><p>设置ignoreFieldNorm为true唯一有意义的时间是，无论多少个术语都无关紧要，而只查询存在术语。</p><h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><p>搜索的范围可以是一个字符串数组或是一个对象数组</p><p>可以通过使用点（.）或数组表示法提供路径来搜索嵌套值，该路径最终必须指向字符串，否则您将不会获得任何结果</p><h5 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: <span class="string">"Old Man's War"</span>,</span><br><span class="line">    author: &#123;</span><br><span class="line">      name: <span class="string">'John Scalzi'</span>,</span><br><span class="line">      tags: [</span><br><span class="line">        &#123;</span><br><span class="line">          value: <span class="string">'American'</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: <span class="string">'The Lock Artist'</span>,</span><br><span class="line">    author: &#123;</span><br><span class="line">      name: <span class="string">'Steve Hamilton'</span>,</span><br><span class="line">      tags: [</span><br><span class="line">        &#123;</span><br><span class="line">          value: <span class="string">'English'</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  includeScore: <span class="literal">true</span>,</span><br><span class="line">  keys: [<span class="string">'author.tags.value'</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GeoBOS.ds.search(<span class="string">'engsh'</span>, options, list, <span class="function"><span class="keyword">function</span> (<span class="params">err,res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(version)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="callback"><a href="#callback" class="headerlink" title="callback"></a>callback</h4><p>回调函数</p><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>err</td><td><code>Error</code></td><td>错误信息, 调用成功时为null</td></tr><tr><td>res</td><td><code>Object</code></td><td>搜索的结果</td></tr></tbody></table><p>回调函数会需要根据options的配置情况（是否包含模糊匹配得分等）返回指定属性的对象，如果只需返回结果对象，可用res.item</p><h5 id="样例-1"><a href="#样例-1" class="headerlink" title="样例"></a>样例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  includeScore: <span class="literal">true</span>,</span><br><span class="line">  keys: [<span class="string">'msg'</span>, <span class="string">'from_name'</span>, <span class="string">'plotName'</span>, <span class="string">'description'</span>],</span><br><span class="line">  threshold: <span class="number">0.7</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 若只返回结果数组</span></span><br><span class="line">GeoBOS.ds.search(word, options, list, <span class="function"><span class="keyword">function</span> (<span class="params">err, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!err)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; res.length; i++) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(res[i].item))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><a id="more"></a><p>这是阅读全文</p><img src= "/img/loading.gif" data-lazy-src="/images/404.jpg" class="">]]></content:encoded>
      
      
      <category domain="http://Leesohot.github.io/categories/%E5%88%86%E7%B1%BB1/">分类1</category>
      
      <category domain="http://Leesohot.github.io/categories/%E5%88%86%E7%B1%BB1/%E5%88%86%E7%B1%BB2/">分类2</category>
      
      
      <category domain="http://Leesohot.github.io/tags/%E6%A0%87%E7%AD%BE1/">标签1</category>
      
      <category domain="http://Leesohot.github.io/tags/%E6%A0%87%E7%AD%BE2/">标签2</category>
      
      
      <comments>http://leesohot.github.io/posts/hello_url.html#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
